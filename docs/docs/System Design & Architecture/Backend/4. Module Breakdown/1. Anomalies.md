Handles anomaly reports from frontend, storing encrypted images or audio files in Google Cloud Storage and recording metadata for each anomaly.

### ğŸ—‚ï¸ Structure

```
anomalies/
â”œâ”€â”€ controllers/
â”‚   â””â”€â”€ AnomalyController.ts    # API routes to record/retrieve anomalies
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ AnomalyService.ts       # Business logic for anomaly data
â”‚   â””â”€â”€ CloudStorageService.ts  # Upload/download/delete files from GCS
â”œâ”€â”€ classes/
â”‚   â”œâ”€â”€ validators/             # DTOs and validation for requests
â”‚   â””â”€â”€ transformers/           # Response formatting and stats helpers
â”œâ”€â”€ abilities/                  # CASL permission logic
â”œâ”€â”€ types.ts                    # Inversify DI tokens
â””â”€â”€ container.ts                # DI bindings
```

### ğŸ¯ Key Features

- **Record anomalies** (image/audio) and store in GCS
- **Validate file metadata** and save info in DB
- **Fetch anomalies** for user, item, or entire course
- **Generate stats** (blur, face, voice, etc.)
- **Signed URLs** for secure access to uploaded media
- **Transactional writes** with rollback safety

### ğŸ” Workflow

- Frontend sends file + anomaly metadata to API
- `AnomalyController` validates and delegates to `AnomalyService`
- `AnomalyService`:
  - Confirms course/version integrity
  - Uploads file via `CloudStorageService`
  - Stores anomaly metadata in MongoDB (within transaction)
  - Returns sanitized response (no file path, just data)

### ğŸ›  Services Involved

- **AnomalyService**: Coordinates file upload, validation, DB save, and anomaly retrieval. All DB interactions wrapped in transactions.
- **CloudStorageService**: Handles file uploads/deletes with timestamped filenames, signed access URLs, and organized storage paths (`userId/type/timestamp.ext`).
